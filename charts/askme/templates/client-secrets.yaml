apiVersion: v1
kind: Secret
metadata:
  name: {{ include "askme.fullname" . }}-secrets
  namespace: askme-{{ .Values.client.name }}
  labels:
    {{- include "askme.labels" . | nindent 4 }}
    askme.avanteam.com/client-id: {{ .Values.client.name }}
  annotations:
    askme.avanteam.com/client: {{ .Values.client.name }}
    askme.avanteam.com/domain: {{ .Values.client.domain }}
    askme.avanteam.com/deployed-at: {{ now | date "2006-01-02T15:04:05Z07:00" }}
type: Opaque
stringData:
  # === CLÃ‰S API SENSIBLES SEULEMENT ===
  
  # Azure OpenAI
  AZURE_OPENAI_KEY: {{ .Values.azure.openai.key | quote }}
  AZURE_OPENAI_EMBEDDING_KEY: {{ .Values.azure.openai.embeddingKey | quote }}

  # Claude AI
  CLAUDE_API_KEY: {{ .Values.claude.apiKey | quote }}

  # OpenAI Direct
  OPENAI_DIRECT_API_KEY: {{ .Values.openai.apiKey | quote }}

  # Mistral AI
  MISTRAL_API_KEY: {{ .Values.mistral.apiKey | quote }}

  # Gemini AI
  GEMINI_API_KEY: {{ .Values.gemini.apiKey | quote }}

  # Azure Services
  AZURE_SEARCH_KEY: {{ .Values.azure.search.key | quote }}
  AZURE_SPEECH_KEY: {{ .Values.azure.speech.key | quote }}
  AZURE_COSMOSDB_ACCOUNT_KEY: {{ .Values.azure.cosmosdb.key | quote }}

  # OVH DNS API (sensible)
  OVH_APP_KEY: {{ .Values.dns.ovh.appKey | quote }}
  OVH_APP_SECRET: {{ .Values.dns.ovh.appSecret | quote }}
  OVH_CONSUMER_KEY: {{ .Values.dns.ovh.consumerKey | quote }}

  # Avanteam Custom (token sensible)
  AVANTEAM_AUTH_TOKEN: {{ .Values.avanteam.authToken | quote }}

  # MS Defender
  MS_DEFENDER_KEY: {{ .Values.msDefender.key | quote }}